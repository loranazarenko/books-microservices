{"ast":null,"code":"import{REQUEST_BOOKS_LIST,SUCCESS_BOOKS_LIST,ERROR_BOOKS_LIST,REQUEST_BOOK_DETAIL,SUCCESS_BOOK_DETAIL,ERROR_BOOK_DETAIL,REQUEST_SAVE_BOOK,SUCCESS_SAVE_BOOK,ERROR_SAVE_BOOK,REQUEST_DELETE_BOOK,SUCCESS_DELETE_BOOK,ERROR_DELETE_BOOK,SET_FILTERS,SET_PAGE,RESET_FILTERS,REQUEST_AUTHORS_LIST,SUCCESS_AUTHORS_LIST,ERROR_AUTHORS_LIST,CLEAR_CURRENT_BOOK}from'../constants/actionTypes';import{booksAxios}from'misc/requests';export const fetchAuthorsList=()=>{return dispatch=>{dispatch({type:REQUEST_AUTHORS_LIST});booksAxios.get('/api/author').then(response=>{dispatch({type:SUCCESS_AUTHORS_LIST,payload:response.data});}).catch(error=>{var _error$response,_error$response$data;dispatch({type:ERROR_AUTHORS_LIST,payload:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load authors'});});};};export const fetchBooksList=function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return dispatch=>{dispatch({type:REQUEST_BOOKS_LIST});const payload={page,size:10,title:filters.title||'',authorId:filters.authorId||null,genre:filters.genre||'',sortBy:filters.sortBy||'id',sortOrder:filters.sortOrder||'DESC'};booksAxios.post('/api/book/_list',payload).then(response=>{dispatch({type:SUCCESS_BOOKS_LIST,payload:{items:response.data.content,totalPages:response.data.totalPages,totalElements:response.data.totalElements,currentPage:response.data.currentPage,pageSize:response.data.pageSize}});}).catch(error=>{var _error$response2,_error$response2$data;dispatch({type:ERROR_BOOKS_LIST,payload:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to load books'});});};};export const fetchBookDetail=id=>{return dispatch=>{dispatch({type:REQUEST_BOOK_DETAIL});booksAxios.get(\"/api/book/\".concat(id)).then(response=>{dispatch({type:SUCCESS_BOOK_DETAIL,payload:response.data});}).catch(error=>{var _error$response3,_error$response3$data;dispatch({type:ERROR_BOOK_DETAIL,payload:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to load book'});});};};export const saveBook=function(bookData){let isNew=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return dispatch=>{dispatch({type:REQUEST_SAVE_BOOK});const request=isNew?booksAxios.post('/api/book',bookData):booksAxios.put(\"/api/book/\".concat(bookData.id),bookData);return request.then(response=>{dispatch({type:SUCCESS_SAVE_BOOK,payload:response.data});return response.data;}).catch(error=>{var _error$response4,_error$response4$data;dispatch({type:ERROR_SAVE_BOOK,payload:((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to save book'});throw error;});};};export const deleteBook=id=>dispatch=>{dispatch({type:REQUEST_DELETE_BOOK});return booksAxios.delete(\"/api/book/\".concat(id)).then(()=>{dispatch({type:SUCCESS_DELETE_BOOK,payload:id});return id;}).catch(error=>{var _error$response5,_error$response5$data;dispatch({type:ERROR_DELETE_BOOK,payload:((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to delete book'});throw error;});};export const setFilters=filters=>({type:SET_FILTERS,payload:filters});export const setPage=page=>({type:SET_PAGE,payload:page});export const resetFilters=()=>({type:RESET_FILTERS});export const clearCurrentBook=()=>({type:CLEAR_CURRENT_BOOK});","map":{"version":3,"names":["REQUEST_BOOKS_LIST","SUCCESS_BOOKS_LIST","ERROR_BOOKS_LIST","REQUEST_BOOK_DETAIL","SUCCESS_BOOK_DETAIL","ERROR_BOOK_DETAIL","REQUEST_SAVE_BOOK","SUCCESS_SAVE_BOOK","ERROR_SAVE_BOOK","REQUEST_DELETE_BOOK","SUCCESS_DELETE_BOOK","ERROR_DELETE_BOOK","SET_FILTERS","SET_PAGE","RESET_FILTERS","REQUEST_AUTHORS_LIST","SUCCESS_AUTHORS_LIST","ERROR_AUTHORS_LIST","CLEAR_CURRENT_BOOK","booksAxios","fetchAuthorsList","dispatch","type","get","then","response","payload","data","catch","error","_error$response","_error$response$data","message","fetchBooksList","page","arguments","length","undefined","filters","size","title","authorId","genre","sortBy","sortOrder","post","items","content","totalPages","totalElements","currentPage","pageSize","_error$response2","_error$response2$data","fetchBookDetail","id","concat","_error$response3","_error$response3$data","saveBook","bookData","isNew","request","put","_error$response4","_error$response4$data","deleteBook","delete","_error$response5","_error$response5$data","setFilters","setPage","resetFilters","clearCurrentBook"],"sources":["D:/JavaProjects/ProfITsoft/books-microservices/frontend/src/app/actions/books.js"],"sourcesContent":["import {\r\n    REQUEST_BOOKS_LIST,\r\n    SUCCESS_BOOKS_LIST,\r\n    ERROR_BOOKS_LIST,\r\n    REQUEST_BOOK_DETAIL,\r\n    SUCCESS_BOOK_DETAIL,\r\n    ERROR_BOOK_DETAIL,\r\n    REQUEST_SAVE_BOOK,\r\n    SUCCESS_SAVE_BOOK,\r\n    ERROR_SAVE_BOOK,\r\n    REQUEST_DELETE_BOOK,\r\n    SUCCESS_DELETE_BOOK,\r\n    ERROR_DELETE_BOOK,\r\n    SET_FILTERS,\r\n    SET_PAGE,\r\n    RESET_FILTERS,\r\n    REQUEST_AUTHORS_LIST,\r\n    SUCCESS_AUTHORS_LIST,\r\n    ERROR_AUTHORS_LIST,\r\n    CLEAR_CURRENT_BOOK,\r\n} from '../constants/actionTypes';\r\nimport {booksAxios} from 'misc/requests';\r\n\r\nexport const fetchAuthorsList = () => {\r\n    return (dispatch) => {\r\n        dispatch({type: REQUEST_AUTHORS_LIST});\r\n\r\n        booksAxios\r\n            .get('/api/author')\r\n            .then((response) => {\r\n                dispatch({\r\n                    type: SUCCESS_AUTHORS_LIST,\r\n                    payload: response.data,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                dispatch({\r\n                    type: ERROR_AUTHORS_LIST,\r\n                    payload: error.response?.data?.message || 'Failed to load authors',\r\n                });\r\n            });\r\n    };\r\n};\r\n\r\nexport const fetchBooksList = (page = 0, filters = {}) => {\r\n    return (dispatch) => {\r\n        dispatch({type: REQUEST_BOOKS_LIST});\r\n\r\n        const payload = {\r\n            page,\r\n            size: 10,\r\n            title: filters.title || '',\r\n            authorId: filters.authorId || null,\r\n            genre: filters.genre || '',\r\n            sortBy: filters.sortBy || 'id',\r\n            sortOrder: filters.sortOrder || 'DESC',\r\n        };\r\n\r\n        booksAxios\r\n            .post('/api/book/_list', payload)\r\n            .then((response) => {\r\n                dispatch({\r\n                    type: SUCCESS_BOOKS_LIST,\r\n                    payload: {\r\n                        items: response.data.content,\r\n                        totalPages: response.data.totalPages,\r\n                        totalElements: response.data.totalElements,\r\n                        currentPage: response.data.currentPage,\r\n                        pageSize: response.data.pageSize,\r\n                    },\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                dispatch({\r\n                    type: ERROR_BOOKS_LIST,\r\n                    payload: error.response?.data?.message || 'Failed to load books',\r\n                });\r\n            });\r\n    };\r\n};\r\n\r\nexport const fetchBookDetail = (id) => {\r\n    return (dispatch) => {\r\n        dispatch({type: REQUEST_BOOK_DETAIL});\r\n\r\n        booksAxios\r\n            .get(`/api/book/${id}`)\r\n            .then((response) => {\r\n                dispatch({\r\n                    type: SUCCESS_BOOK_DETAIL,\r\n                    payload: response.data,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                dispatch({\r\n                    type: ERROR_BOOK_DETAIL,\r\n                    payload: error.response?.data?.message || 'Failed to load book',\r\n                });\r\n            });\r\n    };\r\n};\r\n\r\nexport const saveBook = (bookData, isNew = false) => (dispatch) => {\r\n    dispatch({ type: REQUEST_SAVE_BOOK });\r\n\r\n    const request = isNew\r\n        ? booksAxios.post('/api/book', bookData)\r\n        : booksAxios.put(`/api/book/${bookData.id}`, bookData);\r\n\r\n    return request\r\n        .then(response => {\r\n            dispatch({ type: SUCCESS_SAVE_BOOK, payload: response.data });\r\n            return response.data;\r\n        })\r\n        .catch(error => {\r\n            dispatch({\r\n                type: ERROR_SAVE_BOOK,\r\n                payload: error.response?.data?.message || 'Failed to save book',\r\n            });\r\n            throw error;\r\n        });\r\n};\r\n\r\nexport const deleteBook = (id) => (dispatch) => {\r\n    dispatch({ type: REQUEST_DELETE_BOOK });\r\n\r\n    return booksAxios\r\n        .delete(`/api/book/${id}`)\r\n        .then(() => {\r\n            dispatch({\r\n                type: SUCCESS_DELETE_BOOK,\r\n                payload: id,\r\n            });\r\n            return id;\r\n        })\r\n        .catch((error) => {\r\n            dispatch({\r\n                type: ERROR_DELETE_BOOK,\r\n                payload: error.response?.data?.message || 'Failed to delete book',\r\n            });\r\n            throw error;\r\n        });\r\n};\r\n\r\nexport const setFilters = (filters) => ({\r\n    type: SET_FILTERS,\r\n    payload: filters,\r\n});\r\n\r\nexport const setPage = (page) => ({\r\n    type: SET_PAGE,\r\n    payload: page,\r\n});\r\n\r\nexport const resetFilters = () => ({\r\n    type: RESET_FILTERS,\r\n});\r\n\r\nexport const clearCurrentBook = () => ({\r\n    type: CLEAR_CURRENT_BOOK,\r\n});\r\n"],"mappings":"AAAA,OACIA,kBAAkB,CAClBC,kBAAkB,CAClBC,gBAAgB,CAChBC,mBAAmB,CACnBC,mBAAmB,CACnBC,iBAAiB,CACjBC,iBAAiB,CACjBC,iBAAiB,CACjBC,eAAe,CACfC,mBAAmB,CACnBC,mBAAmB,CACnBC,iBAAiB,CACjBC,WAAW,CACXC,QAAQ,CACRC,aAAa,CACbC,oBAAoB,CACpBC,oBAAoB,CACpBC,kBAAkB,CAClBC,kBAAkB,KACf,0BAA0B,CACjC,OAAQC,UAAU,KAAO,eAAe,CAExC,MAAO,MAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAClC,MAAQ,CAAAC,QAAQ,EAAK,CACjBA,QAAQ,CAAC,CAACC,IAAI,CAAEP,oBAAoB,CAAC,CAAC,CAEtCI,UAAU,CACLI,GAAG,CAAC,aAAa,CAAC,CAClBC,IAAI,CAAEC,QAAQ,EAAK,CAChBJ,QAAQ,CAAC,CACLC,IAAI,CAAEN,oBAAoB,CAC1BU,OAAO,CAAED,QAAQ,CAACE,IACtB,CAAC,CAAC,CACN,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,KAAAC,eAAA,CAAAC,oBAAA,CACdV,QAAQ,CAAC,CACLC,IAAI,CAAEL,kBAAkB,CACxBS,OAAO,CAAE,EAAAI,eAAA,CAAAD,KAAK,CAACJ,QAAQ,UAAAK,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBH,IAAI,UAAAI,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,wBAC9C,CAAC,CAAC,CACN,CAAC,CAAC,CACV,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAG,QAAAA,CAAA,CAA4B,IAA3B,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,IAAE,CAAAG,OAAO,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACjD,MAAQ,CAAAd,QAAQ,EAAK,CACjBA,QAAQ,CAAC,CAACC,IAAI,CAAEtB,kBAAkB,CAAC,CAAC,CAEpC,KAAM,CAAA0B,OAAO,CAAG,CACZQ,IAAI,CACJK,IAAI,CAAE,EAAE,CACRC,KAAK,CAAEF,OAAO,CAACE,KAAK,EAAI,EAAE,CAC1BC,QAAQ,CAAEH,OAAO,CAACG,QAAQ,EAAI,IAAI,CAClCC,KAAK,CAAEJ,OAAO,CAACI,KAAK,EAAI,EAAE,CAC1BC,MAAM,CAAEL,OAAO,CAACK,MAAM,EAAI,IAAI,CAC9BC,SAAS,CAAEN,OAAO,CAACM,SAAS,EAAI,MACpC,CAAC,CAEDzB,UAAU,CACL0B,IAAI,CAAC,iBAAiB,CAAEnB,OAAO,CAAC,CAChCF,IAAI,CAAEC,QAAQ,EAAK,CAChBJ,QAAQ,CAAC,CACLC,IAAI,CAAErB,kBAAkB,CACxByB,OAAO,CAAE,CACLoB,KAAK,CAAErB,QAAQ,CAACE,IAAI,CAACoB,OAAO,CAC5BC,UAAU,CAAEvB,QAAQ,CAACE,IAAI,CAACqB,UAAU,CACpCC,aAAa,CAAExB,QAAQ,CAACE,IAAI,CAACsB,aAAa,CAC1CC,WAAW,CAAEzB,QAAQ,CAACE,IAAI,CAACuB,WAAW,CACtCC,QAAQ,CAAE1B,QAAQ,CAACE,IAAI,CAACwB,QAC5B,CACJ,CAAC,CAAC,CACN,CAAC,CAAC,CACDvB,KAAK,CAAEC,KAAK,EAAK,KAAAuB,gBAAA,CAAAC,qBAAA,CACdhC,QAAQ,CAAC,CACLC,IAAI,CAAEpB,gBAAgB,CACtBwB,OAAO,CAAE,EAAA0B,gBAAA,CAAAvB,KAAK,CAACJ,QAAQ,UAAA2B,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBzB,IAAI,UAAA0B,qBAAA,iBAApBA,qBAAA,CAAsBrB,OAAO,GAAI,sBAC9C,CAAC,CAAC,CACN,CAAC,CAAC,CACV,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAsB,eAAe,CAAIC,EAAE,EAAK,CACnC,MAAQ,CAAAlC,QAAQ,EAAK,CACjBA,QAAQ,CAAC,CAACC,IAAI,CAAEnB,mBAAmB,CAAC,CAAC,CAErCgB,UAAU,CACLI,GAAG,cAAAiC,MAAA,CAAcD,EAAE,CAAE,CAAC,CACtB/B,IAAI,CAAEC,QAAQ,EAAK,CAChBJ,QAAQ,CAAC,CACLC,IAAI,CAAElB,mBAAmB,CACzBsB,OAAO,CAAED,QAAQ,CAACE,IACtB,CAAC,CAAC,CACN,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,KAAA4B,gBAAA,CAAAC,qBAAA,CACdrC,QAAQ,CAAC,CACLC,IAAI,CAAEjB,iBAAiB,CACvBqB,OAAO,CAAE,EAAA+B,gBAAA,CAAA5B,KAAK,CAACJ,QAAQ,UAAAgC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgB9B,IAAI,UAAA+B,qBAAA,iBAApBA,qBAAA,CAAsB1B,OAAO,GAAI,qBAC9C,CAAC,CAAC,CACN,CAAC,CAAC,CACV,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAA2B,QAAQ,CAAG,QAAAA,CAACC,QAAQ,KAAE,CAAAC,KAAK,CAAA1B,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,OAAM,CAAAd,QAAQ,EAAK,CAC/DA,QAAQ,CAAC,CAAEC,IAAI,CAAEhB,iBAAkB,CAAC,CAAC,CAErC,KAAM,CAAAwD,OAAO,CAAGD,KAAK,CACf1C,UAAU,CAAC0B,IAAI,CAAC,WAAW,CAAEe,QAAQ,CAAC,CACtCzC,UAAU,CAAC4C,GAAG,cAAAP,MAAA,CAAcI,QAAQ,CAACL,EAAE,EAAIK,QAAQ,CAAC,CAE1D,MAAO,CAAAE,OAAO,CACTtC,IAAI,CAACC,QAAQ,EAAI,CACdJ,QAAQ,CAAC,CAAEC,IAAI,CAAEf,iBAAiB,CAAEmB,OAAO,CAAED,QAAQ,CAACE,IAAK,CAAC,CAAC,CAC7D,MAAO,CAAAF,QAAQ,CAACE,IAAI,CACxB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,KAAAmC,gBAAA,CAAAC,qBAAA,CACZ5C,QAAQ,CAAC,CACLC,IAAI,CAAEd,eAAe,CACrBkB,OAAO,CAAE,EAAAsC,gBAAA,CAAAnC,KAAK,CAACJ,QAAQ,UAAAuC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBrC,IAAI,UAAAsC,qBAAA,iBAApBA,qBAAA,CAAsBjC,OAAO,GAAI,qBAC9C,CAAC,CAAC,CACF,KAAM,CAAAH,KAAK,CACf,CAAC,CAAC,CACV,CAAC,GAED,MAAO,MAAM,CAAAqC,UAAU,CAAIX,EAAE,EAAMlC,QAAQ,EAAK,CAC5CA,QAAQ,CAAC,CAAEC,IAAI,CAAEb,mBAAoB,CAAC,CAAC,CAEvC,MAAO,CAAAU,UAAU,CACZgD,MAAM,cAAAX,MAAA,CAAcD,EAAE,CAAE,CAAC,CACzB/B,IAAI,CAAC,IAAM,CACRH,QAAQ,CAAC,CACLC,IAAI,CAAEZ,mBAAmB,CACzBgB,OAAO,CAAE6B,EACb,CAAC,CAAC,CACF,MAAO,CAAAA,EAAE,CACb,CAAC,CAAC,CACD3B,KAAK,CAAEC,KAAK,EAAK,KAAAuC,gBAAA,CAAAC,qBAAA,CACdhD,QAAQ,CAAC,CACLC,IAAI,CAAEX,iBAAiB,CACvBe,OAAO,CAAE,EAAA0C,gBAAA,CAAAvC,KAAK,CAACJ,QAAQ,UAAA2C,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBzC,IAAI,UAAA0C,qBAAA,iBAApBA,qBAAA,CAAsBrC,OAAO,GAAI,uBAC9C,CAAC,CAAC,CACF,KAAM,CAAAH,KAAK,CACf,CAAC,CAAC,CACV,CAAC,CAED,MAAO,MAAM,CAAAyC,UAAU,CAAIhC,OAAO,GAAM,CACpChB,IAAI,CAAEV,WAAW,CACjBc,OAAO,CAAEY,OACb,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAiC,OAAO,CAAIrC,IAAI,GAAM,CAC9BZ,IAAI,CAAET,QAAQ,CACda,OAAO,CAAEQ,IACb,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAsC,YAAY,CAAGA,CAAA,IAAO,CAC/BlD,IAAI,CAAER,aACV,CAAC,CAAC,CAEF,MAAO,MAAM,CAAA2D,gBAAgB,CAAGA,CAAA,IAAO,CACnCnD,IAAI,CAAEJ,kBACV,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}