{"ast":null,"code":"import _objectSpread from\"D:/JavaProjects/ProfITsoft/books-microservices/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{BrowserRouter,Routes,Route}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{addAxiosInterceptors}from'misc/requests';import*as pages from'constants/pages';import AuthoritiesProvider from'misc/providers/AuthoritiesProvider';import DefaultPage from'pageProviders/Default';import Loading from'components/Loading';import LoginPage from'pageProviders/Login';import PageContainer from'pageProviders/components/PageContainer';import pageURLs from'constants/pagesURLs';import SecretPage from'pageProviders/Secret';import ThemeProvider from'misc/providers/ThemeProvider';import UserProvider from'misc/providers/UserProvider';import actionsUser from'../actions/user';import Header from'../components/Header';import IntlProvider from'../components/IntlProvider';import MissedPage from'../components/MissedPage';import SearchParamsConfigurator from'../components/SearchParamsConfigurator';import BooksList from'../../pageProviders/BooksList';import BookDetail from'../../pageProviders/BookDetail';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const dispatch=useDispatch();const[state,setState]=useState({componentDidMount:false});const{errors,isFailedSignIn,isFailedSignUp,isFetchingSignIn,isFetchingSignUp,isFetchingUser,isAuthorized}=useSelector(_ref=>{let{user}=_ref;return user;});useEffect(()=>{addAxiosInterceptors({onSignOut:()=>dispatch(actionsUser.fetchSignOut())});dispatch(actionsUser.fetchUser());setState(_objectSpread(_objectSpread({},state),{},{componentDidMount:true}));},[]);if(!state.componentDidMount||isFetchingUser){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(IntlProvider,{children:!state.componentDidMount||isFetchingUser?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(SearchParamsConfigurator,{}),/*#__PURE__*/_jsx(UserProvider,{children:/*#__PURE__*/_jsx(AuthoritiesProvider,{children:isAuthorized?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:pageURLs[pages.defaultPage],element:/*#__PURE__*/_jsx(DefaultPage,{})}),/*#__PURE__*/_jsx(Route,{path:pageURLs.booksList,element:/*#__PURE__*/_jsx(BooksList,{})}),/*#__PURE__*/_jsx(Route,{path:pageURLs.bookDetail(),element:/*#__PURE__*/_jsx(BookDetail,{})}),/*#__PURE__*/_jsx(Route,{path:pageURLs.secret,element:/*#__PURE__*/_jsx(SecretPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(MissedPage,{})})]})})]}):/*#__PURE__*/_jsx(LoginPage,{})})})]})})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Routes","Route","useDispatch","useSelector","addAxiosInterceptors","pages","AuthoritiesProvider","DefaultPage","Loading","LoginPage","PageContainer","pageURLs","SecretPage","ThemeProvider","UserProvider","actionsUser","Header","IntlProvider","MissedPage","SearchParamsConfigurator","BooksList","BookDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","dispatch","state","setState","componentDidMount","errors","isFailedSignIn","isFailedSignUp","isFetchingSignIn","isFetchingSignUp","isFetchingUser","isAuthorized","_ref","user","onSignOut","fetchSignOut","fetchUser","_objectSpread","children","path","defaultPage","element","booksList","bookDetail","secret"],"sources":["D:/JavaProjects/ProfITsoft/books-microservices/frontend/src/app/containers/App.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {\r\n    BrowserRouter,\r\n    Routes,\r\n    Route,\r\n} from 'react-router-dom';\r\nimport {\r\n    useDispatch,\r\n    useSelector,\r\n} from 'react-redux';\r\nimport {addAxiosInterceptors} from 'misc/requests';\r\nimport * as pages from 'constants/pages';\r\nimport AuthoritiesProvider from 'misc/providers/AuthoritiesProvider';\r\nimport DefaultPage from 'pageProviders/Default';\r\nimport Loading from 'components/Loading';\r\nimport LoginPage from 'pageProviders/Login';\r\nimport PageContainer from 'pageProviders/components/PageContainer';\r\nimport pageURLs from 'constants/pagesURLs';\r\nimport SecretPage from 'pageProviders/Secret';\r\nimport ThemeProvider from 'misc/providers/ThemeProvider';\r\nimport UserProvider from 'misc/providers/UserProvider';\r\n\r\nimport actionsUser from '../actions/user';\r\nimport Header from '../components/Header';\r\nimport IntlProvider from '../components/IntlProvider';\r\nimport MissedPage from '../components/MissedPage';\r\nimport SearchParamsConfigurator from '../components/SearchParamsConfigurator';\r\n\r\nimport BooksList from '../../pageProviders/BooksList';\r\nimport BookDetail from '../../pageProviders/BookDetail'\r\n\r\nfunction App() {\r\n    const dispatch = useDispatch();\r\n    const [state, setState] = useState({\r\n        componentDidMount: false,\r\n    });\r\n\r\n    const {\r\n        errors,\r\n        isFailedSignIn,\r\n        isFailedSignUp,\r\n        isFetchingSignIn,\r\n        isFetchingSignUp,\r\n        isFetchingUser,\r\n        isAuthorized,\r\n    } = useSelector(({user}) => user);\r\n\r\n    useEffect(() => {\r\n        addAxiosInterceptors({\r\n            onSignOut: () => dispatch(actionsUser.fetchSignOut()),\r\n        });\r\n        dispatch(actionsUser.fetchUser());\r\n        setState({\r\n            ...state,\r\n            componentDidMount: true,\r\n        });\r\n    }, []);\r\n\r\n    if (!state.componentDidMount || isFetchingUser) {\r\n        return <Loading/>;\r\n    }\r\n\r\n    return (\r\n        <ThemeProvider>\r\n            <IntlProvider>\r\n                {!state.componentDidMount || isFetchingUser ? (\r\n                    <Loading />\r\n                ) : (\r\n                    <BrowserRouter>\r\n                        <SearchParamsConfigurator />\r\n                        <UserProvider>\r\n                            <AuthoritiesProvider>\r\n                                {isAuthorized ? (\r\n                                    <>\r\n                                        <Header />\r\n                                        <PageContainer>\r\n                                            <Routes>\r\n                                                <Route path={pageURLs[pages.defaultPage]} element={<DefaultPage />} />\r\n                                                <Route path={pageURLs.booksList} element={<BooksList />} />\r\n                                                <Route path={pageURLs.bookDetail()} element={<BookDetail />} />\r\n                                                <Route path={pageURLs.secret} element={<SecretPage />} />\r\n                                                <Route path=\"*\" element={<MissedPage />} />\r\n                                            </Routes>\r\n                                        </PageContainer>\r\n                                    </>\r\n                                ) : (\r\n                                    <LoginPage />\r\n                                )}\r\n                            </AuthoritiesProvider>\r\n                        </UserProvider>\r\n                    </BrowserRouter>\r\n                )}\r\n            </IntlProvider>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}