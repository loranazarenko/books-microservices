{"ast":null,"code":"import _objectSpread from\"D:/JavaProjects/ProfITsoft/books-microservices/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{ERROR_RECEIVE_USER,ERROR_SIGN_IN,ERROR_SIGN_UP,RECEIVE_USER,REQUEST_SIGN_OUT,REQUEST_SIGN_IN,REQUEST_SIGN_UP,REQUEST_USER,SUCCESS_SIGN_IN,SUCCESS_SIGN_UP,REQUEST_PROFILE,RECEIVE_PROFILE,ERROR_PROFILE}from'../constants/actionTypes';const initialState={authorities:[],firstName:'',email:'',errors:[],id:'',isAuthorized:false,isFailedSignIn:false,isFailedSignUp:false,isFetchingSignIn:false,isFetchingSignUp:false,isFetchingUser:false,lastName:'',login:'',user:null};const convertErrors=errors=>errors.map(error=>({code:error.code,description:error.description}));export default function Reducer(){var _action$payload;let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ERROR_SIGN_IN:{return _objectSpread(_objectSpread({},state),{},{errors:convertErrors(action.payload),isFailedSignIn:true,isFetchingSignIn:false});}case ERROR_SIGN_UP:{return _objectSpread(_objectSpread({},state),{},{errors:convertErrors(action.payload),isFailedSignUp:true,isFetchingSignUp:false});}case RECEIVE_USER:case SUCCESS_SIGN_IN:{const user=action.payload;return _objectSpread(_objectSpread({},state),{},{authorities:user.authorities||initialState.authorities,email:user.email||initialState.email,firstName:user.firstName||initialState.firstName,id:user.id||initialState.id,isAuthorized:true,isFetchingSignIn:false,isFetchingUser:false,lastName:user.lastName||initialState.lastName,login:user.login||initialState.login});}case SUCCESS_SIGN_UP:{return _objectSpread(_objectSpread({},state),{},{isFetchingSignUp:false});}case ERROR_RECEIVE_USER:case REQUEST_SIGN_OUT:{return initialState;}case REQUEST_SIGN_IN:{return _objectSpread(_objectSpread({},state),{},{errors:initialState.errors,isFailedSignIn:false,isFetchingSignIn:true});}case REQUEST_USER:{return _objectSpread(_objectSpread({},state),{},{isFetchingUser:true});}case REQUEST_SIGN_UP:{return _objectSpread(_objectSpread({},state),{},{errors:initialState.errors,isFetchingSignUp:true,isFailedSignUp:false});}case REQUEST_PROFILE:return _objectSpread(_objectSpread({},state),{},{isFetchingUser:true});case RECEIVE_PROFILE:return _objectSpread(_objectSpread({},state),{},{isFetchingUser:false,user:action.payload,isAuthorized:((_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.authenticated)===true,errors:[]});case ERROR_PROFILE:return _objectSpread(_objectSpread({},state),{},{isFetchingUser:false,isAuthorized:false,user:null,errors:[action.payload]});default:{return state;}}}","map":{"version":3,"names":["ERROR_RECEIVE_USER","ERROR_SIGN_IN","ERROR_SIGN_UP","RECEIVE_USER","REQUEST_SIGN_OUT","REQUEST_SIGN_IN","REQUEST_SIGN_UP","REQUEST_USER","SUCCESS_SIGN_IN","SUCCESS_SIGN_UP","REQUEST_PROFILE","RECEIVE_PROFILE","ERROR_PROFILE","initialState","authorities","firstName","email","errors","id","isAuthorized","isFailedSignIn","isFailedSignUp","isFetchingSignIn","isFetchingSignUp","isFetchingUser","lastName","login","user","convertErrors","map","error","code","description","Reducer","_action$payload","state","arguments","length","undefined","action","type","_objectSpread","payload","authenticated"],"sources":["D:/JavaProjects/ProfITsoft/books-microservices/frontend/src/app/reducers/user.js"],"sourcesContent":["import {\r\n    ERROR_RECEIVE_USER,\r\n    ERROR_SIGN_IN,\r\n    ERROR_SIGN_UP,\r\n    RECEIVE_USER,\r\n    REQUEST_SIGN_OUT,\r\n    REQUEST_SIGN_IN,\r\n    REQUEST_SIGN_UP,\r\n    REQUEST_USER,\r\n    SUCCESS_SIGN_IN,\r\n    SUCCESS_SIGN_UP,\r\n    REQUEST_PROFILE,\r\n    RECEIVE_PROFILE,\r\n    ERROR_PROFILE,\r\n} from '../constants/actionTypes';\r\n\r\nconst initialState = {\r\n    authorities: [],\r\n    firstName: '',\r\n    email: '',\r\n    errors: [],\r\n    id: '',\r\n    isAuthorized: false,\r\n    isFailedSignIn: false,\r\n    isFailedSignUp: false,\r\n    isFetchingSignIn: false,\r\n    isFetchingSignUp: false,\r\n    isFetchingUser: false,\r\n    lastName: '',\r\n    login: '',\r\n    user: null,\r\n};\r\n\r\nconst convertErrors = errors => errors.map(error => ({\r\n    code: error.code,\r\n    description: error.description,\r\n}));\r\n\r\nexport default function Reducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case ERROR_SIGN_IN: {\r\n            return {\r\n                ...state,\r\n                errors: convertErrors(action.payload),\r\n                isFailedSignIn: true,\r\n                isFetchingSignIn: false,\r\n            };\r\n        }\r\n\r\n        case ERROR_SIGN_UP: {\r\n            return {\r\n                ...state,\r\n                errors: convertErrors(action.payload),\r\n                isFailedSignUp: true,\r\n                isFetchingSignUp: false,\r\n            };\r\n        }\r\n\r\n        case RECEIVE_USER:\r\n        case SUCCESS_SIGN_IN: {\r\n            const user = action.payload;\r\n\r\n            return {\r\n                ...state,\r\n                authorities: user.authorities || initialState.authorities,\r\n                email: user.email || initialState.email,\r\n                firstName: user.firstName || initialState.firstName,\r\n                id: user.id || initialState.id,\r\n                isAuthorized: true,\r\n                isFetchingSignIn: false,\r\n                isFetchingUser: false,\r\n                lastName: user.lastName || initialState.lastName,\r\n                login: user.login || initialState.login,\r\n            };\r\n        }\r\n\r\n        case SUCCESS_SIGN_UP: {\r\n            return {\r\n                ...state,\r\n                isFetchingSignUp: false,\r\n            };\r\n        }\r\n\r\n        case ERROR_RECEIVE_USER:\r\n        case REQUEST_SIGN_OUT: {\r\n            return initialState;\r\n        }\r\n\r\n        case REQUEST_SIGN_IN: {\r\n            return {\r\n                ...state,\r\n                errors: initialState.errors,\r\n                isFailedSignIn: false,\r\n                isFetchingSignIn: true,\r\n            }\r\n        }\r\n\r\n        case REQUEST_USER: {\r\n            return {\r\n                ...state,\r\n                isFetchingUser: true,\r\n            };\r\n        }\r\n\r\n        case REQUEST_SIGN_UP: {\r\n            return {\r\n                ...state,\r\n                errors: initialState.errors,\r\n                isFetchingSignUp: true,\r\n                isFailedSignUp: false,\r\n            }\r\n        }\r\n\r\n        case REQUEST_PROFILE:\r\n            return {\r\n                ...state,\r\n                isFetchingUser: true,\r\n            };\r\n\r\n        case RECEIVE_PROFILE:\r\n            return {\r\n                ...state,\r\n                isFetchingUser: false,\r\n                user: action.payload,\r\n                isAuthorized: action.payload?.authenticated === true,\r\n                errors: [],\r\n            };\r\n\r\n        case ERROR_PROFILE:\r\n            return {\r\n                ...state,\r\n                isFetchingUser: false,\r\n                isAuthorized: false,\r\n                user: null,\r\n                errors: [action.payload],\r\n            };\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}